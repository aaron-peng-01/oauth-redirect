<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>OAuth Redirect</title>
</head>
<body>
<script>
  const params = new URLSearchParams(window.location.search);
  const hash = new URLSearchParams(window.location.hash.substring(1));

  const data = {
    code: params.get("code"),
    token: hash.get("access_token"),
    state: params.get("state"),
    raw: window.location.href
  };

  // Flutter WebView / InAppBrowser 会监听 postMessage
  window.opener?.postMessage(data, "*");

  // 如果是移动端 App，使用自定义 scheme 回传
  if (data.token) {
    window.location = "wowokwallet://oauth?token=" + data.token;
  }
</script>
</body>
</html>
